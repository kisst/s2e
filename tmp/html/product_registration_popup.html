<!DOCTYPE html>
<html>

<head>
<title>Product Registration</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="tabid" content="">
<link rel=stylesheet href="../css/jquery-ui-1.10.3.custom.min.css" type="text/css"/>
<link type="text/css" href="../css/nanoscroller.css" rel="stylesheet">
<link type="text/css" href="../css/jquery-ui-1.10.3.custom.min.css" rel="stylesheet">
<link type="text/css" href="../help/help.css" rel="stylesheet">
<script type="text/javascript" src="../js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../js/underscore-1.5.1.min.js"></script>
<script type="text/javascript" src="../js/backbone-1.0.0.min.js"></script>
<script type="text/javascript" src="../js/xui_enhancements.js"></script>
<script type="text/javascript" src="../js/ng_style.js"></script>
<script type="text/javascript" src="../js/fileLoad_v2.js"></script>

<style>
.btn{color:#ffffff;vertical-align:middle;height:22px;padding:0 8px;*padding:0 5px;_padding:-1 5px;margin:2px 0 6px 3px;line-height:22px;*line-height:18px;cursor:pointer;border:#00a1de 1px solid;background-color:#00a1de;}
</style>

<script>
fileLoadMainFrame();

var data;
var url_getReg = '../cgi/get3040.html?cmd=sys_registration';
var url_setRegistration = '../cgi/getd73e.html?cmd=sys_registrationTurnOff';

function encryptStr(str)
{
  var encrypt = encode(str);
  return encrypt;
}

function TurnOff()
{
  //dataSet(url_setRegistration, formDataGet('setform'));
  dataGet(url_setRegistration).fetch({
    success: function(model, resp){
      logoutCheck(resp);
      data = resp.data;
      document.title = data.regTitle;
      if (0 != data.state || 0 != data.regStatus)
        window.close();
    }
  });
  return true;
}
function RemindMeLater()
{
  window.close();
}
function RegisterNow()
{
  var sn = data.sysSN;
  var webURL = "https://my.netgear.com/mynetgear/registerbycd.asp?serial=";
  webURL += sn;
  document.getElementById('RgsDiv1').style.display="none";
  document.getElementById('RgsDiv2').style.display="none";
  document.getElementById('RgsDiv3').style.display="none";
  document.getElementById('RgsDiv4').style.display="none";
  document.getElementById('RgsDiv5').style.display="none";
  document.getElementById('waittingDiv').style.display="";
  document.getElementById('ErrMsgDiv').style.display="none";
  window.open(webURL);
  window.close();
}

function tdhdr(tlt)
{
  var str = "<td class='sec_header tdStyle borderBott'><span class='tableTitleBottom'>"+tlt;
  str += "</span></td><td class='rightAlign borderBott'></td>";
  return str;
}

function changeSize(w, h){
    window.top.resizeTo(w,h);
}

function init()
{
  fileLoadWait();
var mainView = Backbone.View.extend({
  el: '#main_container',
  template: _.template($('#main_content').html()),
  initialize: function() {
    ContentLoading();
    this.render();

    var topperH = $('#topper').height();
    var contentH = $('#main_container').height();
    var buttonH = $('#ButtonsDiv').height();
    var footerH = $('#footer').height();
    var height = topperH + contentH + buttonH + footerH;
    //alert('topperH:'+topperH+' contentH:'+contentH+' buttonH:'+buttonH+' footerH:'+footerH);

    changeSize(455 + 16, height + 80);
  },
  render: function() {
    var that = this;
    this.$el.html(this.template());

    $('#btnTurnOff').val(lang('help', 'txtRegBtnTurnOff'));
    $('#btnRemind').val(lang('help', 'txtRegBtnRemind'));
    $('#btnRegister').val(lang('help', 'txtRegBtnRegister'));
    $('#copyRight').html(lang('login','txtCopyright', [_top.data.copyrightYear]));

    dataGet(url_getReg).fetch({
      success: function(model, resp){
        logoutCheck(resp);
        data = resp.data;
        document.title = data.regTitle;
        if (0 != data.state || 0 != data.regStatus)
          window.close();
      }
    });
  }
});

mainFrame = new mainView();
}

</script>
</head>
<body onload="init();" class="help_top margin0px overflowY">

<div id="topper" class="separator30 headerCloseIcon">
   <a href="#">
     <img src="../images/icon_close.png" style="" alt="Close" onclick="window.close();">
   </a>
</div>

<div id="main_container"></div>
<div id="dialog_container"></div>
<script id="main_content" type="text/template">
<table class="detailsAreaContainer">
 <tr>
  <td><table class="tableStyle">
   <tr>
   </tr>
   <tr><td id="regContent" class="paddingTableBody helpBodyStyle" colspan='2'><table class="tableStyle" style="height:100%;">
    <tr name="RgsDiv1" id="RgsDiv1">
     <td colspan='2'><%= lang('help', 'txtRegPopContent1') %></td>
    </tr>
    <tr name="RgsDiv2" id="RgsDiv2">
     <td colspan='2'><br><li style="margin:0px 20px;"><%= lang('help', 'txtRegPopContent2') %></li></td>
    </tr>
    <tr name="RgsDiv3" id="RgsDiv3">
     <td colspan='2'><li style="margin:0px 20px;"><%= lang('help', 'txtRegPopContent3') %></li></td>
    </tr>
    <tr name="RgsDiv4" id="RgsDiv4">
     <td colspan='2'><li style="margin:0px 20px;"><%= lang('help', 'txtRegPopContent4') %></li></td>
    </tr>
    <tr name="RgsDiv5" id="RgsDiv5">
     <td colspan='2'><br><%= lang('help', 'txtRegPopContent5')  + " " %><a href="https://my.netgear.com" target="_blank">https://my.netgear.com</a><br><br><br><br><br><br><br></td>
    </tr>
    <tr name="waittingDiv" id="waittingDiv" style="display:none;">
     <td colspan='2'><%= lang('help', 'txtRegInProfress') %><br><br><br><br><br><br><br></td>
    </tr>
    <tr name="ErrMsgDiv" id="ErrMsgDiv" style="display:none;">
     <td colspan='2'><%= lang('help', 'txtRegPopUnreachable') %><br><br><br><br><br><br><br></td>
    </tr>
    <tr>
      <td>
     </td>
    </tr>
 </table></td></tr>
</table></td></tr>
</table>
</script>

<!-- Button Get -->
<div id="ButtonsDiv" class="defaultFont alignRight" colspan="5">
  <input type="button" id="btnTurnOff" class="btn" value="Turn Off" onclick="TurnOff()">
  <input type="button" id="btnRemind" class="btn" value="Remind me later" onclick="RemindMeLater()">
  <input type="button" id="btnRegister" class="btn" value="Register now" onclick="RegisterNow()">
  <input type="hidden" name="registration" id="registration" value="">
</div>

<!-- Copyright Get -->
<div class="footer" id="footer">
  <table cellpadding="0" cellspacing="0" class="paddingLR">
    <tbody><tr>
      <td>
        <div class="footer">
          <table cellpadding="0px" cellspacing="0px">
            <tbody><tr class="row30">
              <td valign="middle">
                <label id="copyRight" class="footer popupFooterPadding"><%= lang('login','txtCopyright', [_top.data.copyrightYear]) %></label>
              </td>
            </tr>
          </tbody></table>
        </div>
      </td>
    </tr>
  </tbody></table>
</div>
<!-- Copyright Get -->

</body>

</html>
